"""
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–æ–≤ —Å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç—å—é.
"""

import logging
from typing import Dict, List, Any
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ContextTypes

class LessonStructure:
    """–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —É—Ä–æ–∫–æ–≤."""
    
    # –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏
    THEORY_MODULES = {
        1: {  # –£—Ä–æ–≤–µ–Ω—å 1 - –û—Å–Ω–æ–≤—ã
            "title": "–û—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏",
            "theory": """
üìö <b>–£—Ä–æ–∫ 1: –û—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏</b>

üéØ <b>–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ:</b>
‚Ä¢ –ü–æ–Ω—è—Ç–∏–µ —Ä–∏—Å–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã: RTO, MTPD, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ –¢–∏–ø—ã —É–≥—Ä–æ–∑ –¥–ª—è –±–∞–Ω–∫–∞
‚Ä¢ –†–æ–ª—å —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ (–¶–ë –†–§)

üí° <b>–†–∏—Å–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</b> - —ç—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —É–≥—Ä–æ–∑, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–∞—Ä—É—à–µ–Ω–∏—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–∞–Ω–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.

üìã <b>–ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã:</b>
‚Ä¢ <b>RTO</b> (Recovery Time Objective) - —Ü–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
‚Ä¢ <b>MTPD</b> (Maximum Tolerable Period of Disruption) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ—Å—Ç–æ—è
‚Ä¢ <b>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å</b> - –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–Ω–∫–∞

üö® <b>6 —Ç–∏–ø–æ–≤ —É–≥—Ä–æ–∑:</b>
1. –¢–µ—Ö–Ω–æ–≥–µ–Ω–Ω—ã–µ (–ø–æ–∂–∞—Ä—ã, –∞–≤–∞—Ä–∏–∏)
2. –ü—Ä–∏—Ä–æ–¥–Ω—ã–µ (–∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è, –Ω–∞–≤–æ–¥–Ω–µ–Ω–∏—è)
3. –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ (–∑–∞–±–∞—Å—Ç–æ–≤–∫–∏, –±–µ—Å–ø–æ—Ä—è–¥–∫–∏)
4. –ì–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–∞–Ω–∫—Ü–∏–∏, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)
5. –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ (–∫—Ä–∏–∑–∏—Å—ã, –¥–µ—Ñ–æ–ª—Ç—ã)
6. –ë–∏–æ–ª–æ–≥–æ-—Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ (–ø–∞–Ω–¥–µ–º–∏–∏, —ç–ø–∏–¥–µ–º–∏–∏)

‚úÖ –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º –≤–∞—à–∏ –∑–Ω–∞–Ω–∏—è!
            """,
            "learning_objectives": [
                "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤",
                "–ó–Ω–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ —É–≥—Ä–æ–∑", 
                "–û—Å–æ–∑–Ω–∞–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏"
            ]
        },
        2: {  # –£—Ä–æ–≤–µ–Ω—å 2 - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã
            "title": "–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ—Ü–µ–Ω–∫–∏ –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è",
            "theory": """
üìö <b>–£—Ä–æ–∫ 2: –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ—Ü–µ–Ω–∫–∏ –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è</b>

üéØ <b>–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ:</b>
‚Ä¢ –ú–µ—Ç–æ–¥–∏–∫–∞ –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
‚Ä¢ –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã
‚Ä¢ –ü–ª–∞–Ω—ã –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ (–û–ù–∏–í–î)

üìä <b>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –≤–∫–ª—é—á–∞–µ—Ç:</b>
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚Ä¢ –û—Ü–µ–Ω–∫—É –≤–ª–∏—è–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ê–°, –æ—Ñ–∏—Å–æ–≤, –∞—É—Ç—Å–æ—Ä—Å–µ—Ä–æ–≤
‚Ä¢ –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è —Ä–∏—Å–∫–∞ (T_R)
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ä–∏—Å–∫–∞

üìà <b>–§–æ—Ä–º—É–ª–∞ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è —Ä–∏—Å–∫–∞:</b>
T_R = T_rec_AC + T_rec_Office + T_move √ó F_strategy + T_rec_process

üö® <b>–ü–ª–∞–Ω –û–ù–∏–í–î —Å–æ–¥–µ—Ä–∂–∏—Ç:</b>
‚Ä¢ –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É
‚Ä¢ –ü–µ—Ä–µ–µ–∑–¥ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏
‚Ä¢ –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω

‚úÖ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º!
            """,
            "learning_objectives": [
                "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏",
                "–ó–Ω–∞–Ω–∏–µ —Ñ–æ—Ä–º—É–ª —Ä–∞—Å—á–µ—Ç–∞",
                "–£–º–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
            ]
        },
        3: {  # –£—Ä–æ–≤–µ–Ω—å 3 - –°—Ü–µ–Ω–∞—Ä–∏–∏
            "title": "–ê–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π",
            "theory": """
üìö <b>–£—Ä–æ–∫ 3: –ê–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π</b>

üéØ <b>–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ:</b>
‚Ä¢ –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —É–≥—Ä–æ–∑
‚Ä¢ –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏
‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏

üé≠ <b>–°—Ü–µ–Ω–∞—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑:</b>
‚Ä¢ –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É–≥—Ä–æ–∑
‚Ä¢ –û—Ü–µ–Ω–∫–∞ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞
‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è

üß† <b>–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π:</b>
‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–∏
‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π
‚Ä¢ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º–∏
‚Ä¢ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º

‚ö° <b>–ü—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:</b>
‚Ä¢ –ü–∞–Ω–¥–µ–º–∏—è + –∫–∏–±–µ—Ä–∞—Ç–∞–∫–∞
‚Ä¢ –ü—Ä–∏—Ä–æ–¥–Ω–∞—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ + —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫—Ä–∏–∑–∏—Å
‚Ä¢ –ì–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∞–Ω–∫—Ü–∏–∏ + —Ç–µ—Ö–Ω–æ–≥–µ–Ω–Ω–∞—è –∞–≤–∞—Ä–∏—è

‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–º –Ω–∞–≤—ã–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π!
            """,
            "learning_objectives": [
                "–ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤",
                "–ü—Ä–∏–Ω—è—Ç–∏–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π",
                "–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ"
            ]
        }
    }

    @staticmethod
    async def show_theory_module(update: Update, context: ContextTypes.DEFAULT_TYPE, level: int):
        """–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å."""
        try:
            if level not in LessonStructure.THEORY_MODULES:
                level = 1  # –§–∞–ª–ª–±–µ–∫ –Ω–∞ –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
            
            module = LessonStructure.THEORY_MODULES[level]
            
            keyboard = [
                [InlineKeyboardButton("‚úÖ –ü–æ–Ω—è—Ç–Ω–æ, –∫ –≤–æ–ø—Ä–æ—Å–∞–º!", callback_data=f"start_questions_{level}")],
                [InlineKeyboardButton("üìñ –ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å", callback_data=f"reread_theory_{level}")],
                [
                    InlineKeyboardButton("‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å", callback_data="ask_question"),
                    InlineKeyboardButton("üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")
                ]
            ]
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            try:
                if update.callback_query:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Ç–æ –∂–µ –ª–∏ —Å–∞–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                    current_text = update.callback_query.message.text
                    if current_text and module["theory"] in current_text:
                        # –°–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ callback
                        logging.info(f"üìö –¢–µ–æ—Ä–∏—è —É—Ä–æ–≤–Ω—è {level} —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–∞")
                        return
                    
                    await update.callback_query.edit_message_text(
                        text=module["theory"],
                        reply_markup=InlineKeyboardMarkup(keyboard),
                        parse_mode='HTML'
                    )
                else:
                    await update.message.reply_text(
                        text=module["theory"],
                        reply_markup=InlineKeyboardMarkup(keyboard),
                        parse_mode='HTML'
                    )
            except Exception as telegram_error:
                # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                await context.bot.send_message(
                    chat_id=update.effective_chat.id,
                    text=module["theory"],
                    reply_markup=InlineKeyboardMarkup(keyboard),
                    parse_mode='HTML'
                )
            
            logging.info(f"üìö –ü–æ–∫–∞–∑–∞–Ω —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å —É—Ä–æ–≤–Ω—è {level}")
            
        except Exception as e:
            logging.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫–∞–∑–∞ —Ç–µ–æ—Ä–∏–∏: {e}")
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            try:
                if update.callback_query:
                    await update.callback_query.edit_message_text(
                        "üòî –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.",
                        reply_markup=InlineKeyboardMarkup([
                            [InlineKeyboardButton("üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
                        ])
                    )
                else:
                    await update.message.reply_text(
                        "üòî –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞."
                    )
            except:
                pass

    @staticmethod
    def get_lesson_flow(level: int) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞ –¥–ª—è —É—Ä–æ–≤–Ω—è."""
        return {
            "theory_module": LessonStructure.THEORY_MODULES.get(level, LessonStructure.THEORY_MODULES[1]),
            "question_count": 3 + level,  # –ë–æ–ª—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö
            "passing_score": 70 + (level * 5),  # –í—ã—à–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö
            "scenarios_enabled": level >= 3  # –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–æ–ª—å–∫–æ —Å 3 —É—Ä–æ–≤–Ω—è
        }

    @staticmethod
    def get_progress_text(completed_theory: bool, questions_answered: int, correct_answers: int) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–∫–∞."""
        if not completed_theory:
            return "üìö –ò–∑—É—á–∏—Ç–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç—å"
        
        if questions_answered == 0:
            return "‚úÖ –¢–µ–æ—Ä–∏—è –∏–∑—É—á–µ–Ω–∞ ‚Ä¢ üéØ –ì–æ—Ç–æ–≤ –∫ –≤–æ–ø—Ä–æ—Å–∞–º"
        
        accuracy = (correct_answers / questions_answered * 100) if questions_answered > 0 else 0
        return f"‚úÖ –¢–µ–æ—Ä–∏—è –∏–∑—É—á–µ–Ω–∞ ‚Ä¢ üéØ –í–æ–ø—Ä–æ—Å–æ–≤: {questions_answered} ‚Ä¢ üìä –¢–æ—á–Ω–æ—Å—Ç—å: {accuracy:.0f}%"